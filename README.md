# Yamusic-dl

Консольная утилита для скачивания музыки из Яндекс Музыки.

## Описание

Yamusic-dl позволяет скачивать треки из Яндекс Музыки с помощью API сервиса. Утилита поддерживает различные уровни качества и сохраняет файлы в формате M4A с метаданными исполнителя и названия трека.

## Возможности

- Скачивание треков по ID
- Поддержка различных уровней качества (min, normal, max)
- Расшифровка защищенного контента
- Автоматическое именование файлов на основе метаданных

## Установка

### Требования

- Go 1.16 или выше
- Токен доступа к API Яндекс Музыки

### Сборка из исходников

```bash
git clone https://github.com/username/yamusic-dl.git
cd yamusic-dl
go build -o yamusic-dl ./cmd
```

## Использование

```bash
./yamusic-dl -track <ID трека> -token <токен доступа> [опции]
```

### Обязательные параметры

- `-track`: ID трека в Яндекс Музыке
- `-token`: Токен доступа к API Яндекс Музыки

### Опциональные параметры

- `-quality`: Качество трека (min, normal, max), по умолчанию: max
- `-output`: Директория для сохранения файлов, по умолчанию: текущая директория
- `-verbose`: Вывод отладочных сообщений

### Примеры

Скачать трек с ID 123456789 с максимальным качеством:
```bash
./yamusic-dl -track 123456789 -token YOUR_TOKEN
```

Скачать трек с обычным качеством в определенную директорию:
```bash
./yamusic-dl -track 123456789 -token YOUR_TOKEN -quality normal -output ~/Music
```

## Архитектура проекта

Проект организован согласно принципам чистой архитектуры и следует рекомендациям по стилю кода Go:

```
yamusic-dl/
├── cmd/               # Точка входа в приложение
│   └── main.go        # Главный файл приложения
├── internal/          # Внутренние пакеты, не экспортируемые вне проекта
│   ├── api/           # Модели данных и константы для API
│   ├── crypto/        # Функции для криптографических операций
│   ├── logger/        # Система логирования
│   └── utils/         # Вспомогательные функции
└── pkg/               # Публичные пакеты, которые могут использоваться другими проектами
    └── yamusic/       # Клиент для работы с API Яндекс Музыки
```

### Модули

- **cmd/main.go**: Точка входа, обработка аргументов командной строки
- **internal/api**: Модели данных и константы для работы с API
- **internal/crypto**: Функции для шифрования и дешифрования данных
- **internal/logger**: Система логирования с уровнями детализации
- **internal/utils**: Вспомогательные функции для работы с файлами
- **pkg/yamusic**: Клиент для работы с API Яндекс Музыки

## Лицензия

MIT

## Получение токена Яндекс Музыки

Для работы с API Яндекс Музыки необходим токен доступа. Ниже приведены способы его получения:

### Через приложение Яндекс Музыки

1. Установите и авторизуйтесь в приложении Яндекс Музыка
2. Настройте прокси на вашем устройстве (например, через Charles или Fiddler)
3. Прослушайте трафик приложения
4. Найдите запросы к `api.music.yandex.net`
5. В заголовках запроса найдите токен в поле `Authorization`

### Альтернативные методы: 

https://yandex-music.readthedocs.io/en/main/token.html

## Отказ от ответственности

Данная утилита разработана исключительно в образовательных и ознакомительных целях для демонстрации принципов работы с API и шифрования данных. 

**ВАЖНО:**
- Проект не предназначен для нарушения авторских прав или обхода технических средств защиты контента.
- Скачивание треков может нарушать условия использования сервиса Яндекс Музыка, а также законодательство вашей страны.
- Автор не несет ответственности за любое неправомерное использование данной утилиты.
- Использование данного программного обеспечения осуществляется на ваш страх и риск.
- Перед использованием убедитесь, что ваши действия соответствуют законодательству вашей страны и условиям использования сервисов Яндекс.

Рекомендуется использовать утилиту только для изучения принципов программирования и работы API, без фактического скачивания защищенного авторским правом контента.
